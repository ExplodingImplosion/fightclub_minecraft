var E=Object.defineProperty;var b=(e,s,t)=>s in e?E(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var m=(e,s,t)=>(b(e,typeof s!="symbol"?s+"":s,t),t);import{u as C}from"./scheduler.95481435.js";import{w as L}from"./index.f2cb1ae8.js";var S={};function I(e){return e==="local"?localStorage:sessionStorage}function A(e,s,t){var l,o;const i=(l=t==null?void 0:t.serializer)!=null?l:JSON,r=(o=t==null?void 0:t.storage)!=null?o:"local",a=typeof window<"u"&&typeof document<"u",c=a?I(r):null;function f(d,h){c==null||c.setItem(d,i.stringify(h))}if(!S[e]){const d=L(s,n=>{const k=c==null?void 0:c.getItem(e);if(k?n(i.parse(k)):f(e,s),a){const v=w=>{w.key===e&&n(w.newValue?i.parse(w.newValue):null)};return window.addEventListener("storage",v),()=>window.removeEventListener("storage",v)}}),{subscribe:h,set:p}=d;S[e]={set(n){f(e,n),p(n)},update(n){return d.update(k=>{const v=n(k);return f(e,v),v})},subscribe:h}}return S[e]}var y=(e=>(e[e.None=0]="None",e[e.Minimal=1]="Minimal",e[e.Status=2]="Status",e))(y||{}),D=(e=>(e[e.Start=2]="Start",e[e.Stop=1]="Stop",e[e.Restart=4]="Restart",e[e.Kill=3]="Kill",e))(D||{}),R=(e=>(e[e.InvalidOrEmpty=0]="InvalidOrEmpty",e[e.All=1]="All",e[e.Backups=2]="Backups",e))(R||{}),N=(e=>(e[e.Empty=0]="Empty",e[e.About=1]="About",e[e.Account=2]="Account",e[e.Backups=3]="Backups",e[e.BackupsCreate=4]="BackupsCreate",e[e.BackupsEdit=5]="BackupsEdit",e[e.BackupHistory=6]="BackupHistory",e[e.BackupSettings=7]="BackupSettings",e[e.Console=8]="Console",e[e.Dashboard=9]="Dashboard",e[e.ServerEdit=10]="ServerEdit",e[e.Servers=11]="Servers",e[e.Settings=12]="Settings",e[e.Users=13]="Users",e[e.UsersCreate=14]="UsersCreate",e[e.UsersEdit=15]="UsersEdit",e[e.Scheduler=16]="Scheduler",e[e.SchedulerTaskCreate=17]="SchedulerTaskCreate",e[e.SchedulerTaskEdit=18]="SchedulerTaskEdit",e[e.SchedulerHistory=19]="SchedulerHistory",e))(N||{}),u=(e=>(e[e.Dark=0]="Dark",e[e.Light=1]="Light",e[e.System=2]="System",e))(u||{}),T=(e=>(e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Permission=2]="Permission",e[e.Info=3]="Info",e))(T||{});class ${constructor(){m(this,"hasAccessToAllServers",!1);m(this,"serverPermissions",new Array)}init(s,t){this.hasAccessToAllServers=s,Object.entries(t).forEach(l=>{var o,i,r,a,c,f,d,h,p,n;this.serverPermissions.push({serverId:l[0],permissions:{viewStats:((o=l[1])==null?void 0:o.viewStats)??!1,viewConsole:((i=l[1])==null?void 0:i.viewConsole)??!1,useConsole:((r=l[1])==null?void 0:r.useConsole)??!1,useServerActions:((a=l[1])==null?void 0:a.useServerActions)??!1,editServer:((c=l[1])==null?void 0:c.editServer)??!1,viewBackups:((f=l[1])==null?void 0:f.viewBackups)??!1,createBackup:((d=l[1])==null?void 0:d.createBackup)??!1,editBackup:((h=l[1])==null?void 0:h.editBackup)??!1,deleteBackups:((p=l[1])==null?void 0:p.deleteBackups)??!1,triggerBackup:((n=l[1])==null?void 0:n.triggerBackup)??!1}})})}update(s,t,l){this.serverPermissions=[],s.forEach(o=>{let i=t.filter(r=>r.includes(o));this.serverPermissions.push({serverId:o,permissions:{viewStats:i.some(r=>r.includes("viewStats"))??!1,viewConsole:i.some(r=>r.includes("viewConsole"))??!1,useConsole:i.some(r=>r.includes("useConsole"))??!1,useServerActions:i.some(r=>r.includes("useServerActions"))??!1,editServer:i.some(r=>r.includes("editServer"))??!1,viewBackups:i.some(r=>r.includes("viewBackups"))??!1,createBackup:i.some(r=>r.includes("createBackup"))??!1,editBackup:i.some(r=>r.includes("editBackup"))??!1,deleteBackups:i.some(r=>r.includes("deleteBackups"))??!1,triggerBackup:i.some(r=>r.includes("triggerBackup"))??!1}})})}getCustomServerCount(){var s;return(s=this.serverPermissions)==null?void 0:s.length}getServerIds(){return this.serverPermissions.map(s=>s.serverId)}getServerPermissionIds(){const s=[];for(const t of this.serverPermissions){const{serverId:l,permissions:o}=t,r=Object.keys(o).filter(a=>o[a]==!0).map(a=>`${l}-${a}`);s.push(...r)}return s}}var H=(e=>(e[e.High=0]="High",e[e.Low=1]="Low",e[e.None=2]="None",e))(H||{}),O=(e=>(e[e.NeverRun=0]="NeverRun",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Failed=3]="Failed",e[e.Canceled=4]="Canceled",e))(O||{});class x{constructor(){m(this,"fileBlacklist",[]);m(this,"folderBlacklist",[])}init(s,t){this.fileBlacklist=s,this.folderBlacklist=t}update(s,t){this.fileBlacklist=s,this.folderBlacklist=t}getCount(){var t,l;let s=((t=this.fileBlacklist)==null?void 0:t.length)+((l=this.folderBlacklist)==null?void 0:l.length);return s||0}}const B=A("settings",{serversRefreshRate:5,consoleRefreshRate:5,autoScrollConsole:!0,chatModeConsole:!1,amountOfConsoleLines:50,reverseConsoleLines:!1,panelTheme:u.Light,debugging:!1,loadedSuccessfully:!0});function U(){return C(B).panelTheme==u.System?K():C(B).panelTheme??u.Light}function g(e){B.update(s=>(s.panelTheme=e,s))}function J(){const e=U();g(e==u.Dark?u.Light:u.Dark)}function K(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?u.Dark:u.Light}export{O as B,y as F,R as M,u as P,$ as S,T as W,g as a,N as b,H as c,x as d,D as e,U as g,A as p,B as s,J as t};
